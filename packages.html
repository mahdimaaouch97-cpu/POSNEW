<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>إدارة الباقات</title>
<link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
<header>
<h1>إدارة الباقات</h1>
<nav>
<ul>
<li><a href="index.html">الرئيسية</a></li>
<li><a href="subscribers.html">المشتركين</a></li>
<li><a href="payments.html">الدفع</a></li>
<li><a href="packages.html" class="active">الباقات</a></li>
<li><a href="receipts.html">الإيصالات</a></li>
<li><a href="report.html">التقارير</a></li>
<li><a href="login.html">تسجيل الخروج</a></li>
</ul>
</nav>
</header>

<main>
<section class="packages-section">
<button onclick="addPackage()">إضافة باقة جديدة</button>

<table id="packagesTable">
<thead>
<tr>
<th>الرقم</th>
<th>اسم الباقة</th>
<th>السعر ($)</th>
<th>الإجراءات</th>
</tr>
</thead>
<tbody></tbody>
</table>
</section>
</main>

<footer>
<p>© 2026 FAST NET. جميع الحقوق محفوظة.</p>
</footer>

<script>
// تحميل الباقات من LocalStorage
let packages = JSON.parse(localStorage.getItem("packages")) || [];

// عرض الباقات في الجدول
function renderPackages() {
    const tableBody = document.querySelector("#packagesTable tbody");
    tableBody.innerHTML = "";
    packages.forEach((pkg, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `
        <td>${index + 1}</td>
        <td>${pkg.name}</td>
        <td>$${pkg.price}</td>
        <td>
            <button onclick="editPackage(${index})">تعديل</button>
            <button onclick="deletePackage(${index})">حذف</button>
        </td>
        `;
        tableBody.appendChild(row);
    });
    localStorage.setItem("packages", JSON.stringify(packages));
}

// إضافة باقة جديدة
function addPackage() {
    const name = prompt("أدخل اسم الباقة:");
    if(!name) return;
    const price = prompt("أدخل سعر الباقة بالدولار:");
    if(!price || isNaN(price)) return alert("الرجاء إدخال سعر صحيح!");
    packages.push({ name, price: parseFloat(price).toFixed(2) });
    renderPackages();
}

// تعديل باقة
function editPackage(index) {
    const pkg = packages[index];
    const newName = prompt("تعديل اسم الباقة:", pkg.name);
    if(!newName) return;
    const newPrice = prompt("تعديل سعر الباقة بالدولار:", pkg.price);
    if(!newPrice || isNaN(newPrice)) return alert("الرجاء إدخال سعر صحيح!");
    packages[index] = { name: newName, price: parseFloat(newPrice).toFixed(2) };
    renderPackages();
}

// حذف باقة
function deletePackage(index) {
    if(confirm("هل تريد حذف هذه الباقة؟")) {
        packages.splice(index,1);
        renderPackages();
    }
}

// عند تحميل الصفحة
window.onload = renderPackages;
</script>
</body>
</html>
